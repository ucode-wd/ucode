---
import "../../styles/global.css";
---

<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Error de Pago | Chequear App</title>
        <style>
            body {
                min-height: 100vh;
                margin: 0;
                background-color: #f8f9fa; /* Light grey backdrop */
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                font-family:
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    "Segoe UI",
                    Roboto,
                    "Helvetica Neue",
                    sans-serif;
            }
            .card {
                background: #ffffff; /* COLORS.bg */
                border-radius: 1.5rem;
                padding: 3rem 2rem;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 4px 20px rgba(11, 42, 87, 0.08); /* Subtle shadow tinted with navy */
            }
            .icon-wrapper {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                background-color: rgba(217, 83, 79, 0.1); /* Light red bg */
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 1.5rem;
            }
            .icon {
                font-size: 2.5rem;
                color: #d9534f; /* COLORS.danger */
                animation: shake 0.5s ease-in-out forwards;
            }
            @keyframes shake {
                0%,
                100% {
                    transform: translateX(0);
                }
                20% {
                    transform: translateX(-8px);
                }
                40% {
                    transform: translateX(8px);
                }
                60% {
                    transform: translateX(-8px);
                }
                80% {
                    transform: translateX(8px);
                }
            }
            h1 {
                font-size: 1.5rem;
                margin: 0 0 0.75rem;
                font-weight: 700;
                color: #0b2a57; /* COLORS.navy */
            }
            p {
                color: #6b7280; /* COLORS.muted */
                margin: 0 0 1.5rem;
                line-height: 1.6;
                font-size: 1rem;
            }
            .support {
                font-size: 0.9rem;
                color: #6b7280; /* COLORS.muted */
                margin-top: 2rem;
                padding-top: 1.5rem;
                border-top: 1px solid #e5e7eb;
            }
            .support a {
                color: #0b2a57; /* COLORS.navy */
                text-decoration: none;
                font-weight: 600;
                transition: color 0.2s;
            }
            .support a:hover {
                color: #16c79a; /* COLORS.green hover */
            }
            .countdown {
                margin-top: 1rem;
                color: #6b7280;
                font-weight: 600;
            }
        </style>
    </head>
    <body>
        <div class="card">
            <div class="icon-wrapper">
                <div class="icon">✕</div>
            </div>
            <h1>Hubo un error en el pago</h1>
            <p>No pudimos procesar tu pago. Por favor, intenta de nuevo.</p>
            <div class="support">
                Si el problema persiste, contáctanos a<br />
                <a href="mailto:soporte@chequear.ucode.com.ar"
                    >soporte@chequear.ucode.com.ar</a
                >
            </div>
        </div>
        <div class="countdown">Volviendo a la app en 3 segundos</div>

        <script type="text/javascript">
            let countdownEl = document.querySelector(".countdown");
            let seconds = 3;

            const scheme = "chequearapp://(protected)/profile"; // tu deep link
            let fallback = "";

            const ua = navigator.userAgent || navigator.vendor || window.opera;
            if (/android/i.test(ua)) {
                fallback =
                    "https://play.google.com/store/apps/details?id=com.ucode.chequear";
            } else if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {
                fallback = "https://apps.apple.com/app/idTU_APP_ID"; // reemplaza TU_APP_ID
            } else {
                fallback = "https://ucode.com.ar/"; // fallback web
            }

            const interval = setInterval(() => {
                seconds--;
                if (seconds > 0) {
                    countdownEl.textContent = `Volviendo a la app en ${seconds} segundos`;
                } else {
                    clearInterval(interval);
                    // Intentar abrir la app
                    const start = Date.now();
                    window.location = scheme;
                    setTimeout(() => {
                        if (Date.now() - start < 2000) {
                            window.location = fallback;
                        }
                    }, 1500);
                }
            }, 1000);
        </script>
    </body>
</html>
