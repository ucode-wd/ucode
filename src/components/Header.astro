<header
    id="site-header"
    class="fixed top-0 left-0 w-full h-20 flex items-center justify-between px-6 md:px-12 z-50 transition-all duration-300 border-white/10"
    role="banner"
>
    <!-- capa interna para el blur -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-md opacity-0 transition-opacity duration-300 pointer-events-none"></div>

    <!-- Logo -->
    <a href="/" aria-label="Ucode" class="flex items-center h-full z-20 grow basis-0">
        <div
            class="rounded-md transition-transform duration-300 motion-reduce:duration-0 hover:-translate-y-0.5 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-400/20"
        >
            <img src="/ucode3.webp" alt="Ucode Logo" class="h-10 object-contain" />
        </div>
    </a>

    <!-- Desktop nav -->
    <nav class="hidden md:flex items-center gap-8 relative z-20" role="navigation" aria-label="Main">
        <a href="#hero" class="group relative text-white/90 hover:text-white transition-colors duration-300 text-sm tracking-wide">
            <span>INICIO</span>
            <span class="block h-[2px] rounded-full mt-1 w-0 group-hover:w-full transition-all duration-300 bg-gradient-to-r from-indigo-400 to-indigo-300"></span>
        </a>
        <a href="#bento" class="group relative text-white/90 hover:text-white transition-colors duration-300 text-sm tracking-wide">
            <span>NOSOTROS</span>
            <span class="block h-[2px] rounded-full mt-1 w-0 group-hover:w-full transition-all duration-300 bg-gradient-to-r from-indigo-400 to-indigo-300"></span>
        </a>
        <a href="#proyects" class="group relative text-white/90 hover:text-white transition-colors duration-300 text-sm tracking-wide">
            <span>PROYECTOS</span>
            <span class="block h-[2px] rounded-full mt-1 w-0 group-hover:w-full transition-all duration-300 bg-gradient-to-r from-indigo-400 to-indigo-300"></span>
        </a>
        <a href="#contacto" class="group relative text-white/90 hover:text-white transition-colors duration-300 text-sm tracking-wide">
            <span>CONTACTO</span>
            <span class="block h-[2px] rounded-full mt-1 w-0 group-hover:w-full transition-all duration-300 bg-gradient-to-r from-indigo-400 to-indigo-300"></span>
        </a>
    </nav>

    <!-- CTA -->
    <div class="hidden md:flex items-center gap-4 grow basis-0 justify-end relative z-20">
        <a
            href="#contacto"
            class="ml-2 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-500 hover:bg-indigo-600 text-white shadow-md transition-transform duration-200 hover:-translate-y-0.5"
        >
            Contactanos
        </a>
    </div>

    <!-- Botón menú móvil -->
    <button
        id="menu-open-btn"
        class="md:hidden z-50 p-2 transition-opacity duration-200 relative"
        aria-controls="mobile-nav"
        aria-expanded="false"
        aria-label="Abrir menú"
        type="button"
    >
        <img src="/bars.svg" alt="" class="h-7 w-auto" />
    </button>

    <!-- Menú móvil -->
    <nav
        id="mobile-nav"
        class="fixed inset-0 bg-black/80 backdrop-blur-lg z-40 flex flex-col items-center justify-center gap-8 transform -translate-y-full opacity-0 pointer-events-none transition-all duration-300 ease-out"
        aria-hidden="true"
    >
        <button
            id="menu-close-btn"
            class="absolute top-5 right-5 p-2 z-50 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-400/40"
            aria-label="Cerrar menú"
            type="button"
        >
            <img src="/x.svg" alt="" class="h-8 w-auto" />
        </button>

        <a href="#hero" class="mobile-link text-white text-2xl font-medium tracking-wide hover:text-gray-200 transition-colors duration-150" data-close>INICIO</a>
        <a href="#bento" class="mobile-link text-white text-2xl font-medium tracking-wide hover:text-gray-200 transition-colors duration-150" data-close>NOSOTROS</a>
        <a href="#proyects" class="mobile-link text-white text-2xl font-medium tracking-wide hover:text-gray-200 transition-colors duration-150" data-close>PROYECTOS</a>
        <a href="#contacto" class="mobile-link text-white text-2xl font-medium tracking-wide hover:text-gray-200 transition-colors duration-150" data-close>CONTACTO</a>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const openBtn = document.getElementById('menu-open-btn');
            const closeBtn = document.getElementById('menu-close-btn');
            const mobileNav = document.getElementById('mobile-nav');
            const mobileLinks = mobileNav.querySelectorAll('[data-close]');
            const header = document.getElementById('site-header');
            const blurLayer = header.querySelector('div.absolute.inset-0');

            function openMenu() {
                mobileNav.classList.remove('-translate-y-full', 'opacity-0', 'pointer-events-none');
                mobileNav.classList.add('translate-y-0', 'opacity-100', 'pointer-events-auto');
                mobileNav.style.zIndex = '9999';
                mobileNav.setAttribute('aria-hidden', 'false');
                openBtn.setAttribute('aria-expanded', 'true');
                document.addEventListener('keydown', onKeydown);
            }

            function closeMenu() {
                mobileNav.classList.add('-translate-y-full', 'opacity-0', 'pointer-events-none');
                mobileNav.classList.remove('translate-y-0', 'opacity-100', 'pointer-events-auto');
                setTimeout(() => mobileNav.style.zIndex = '', 350);
                mobileNav.setAttribute('aria-hidden', 'true');
                openBtn.setAttribute('aria-expanded', 'false');
                document.removeEventListener('keydown', onKeydown);
            }

            function onKeydown(e) {
                if (e.key === 'Escape') closeMenu();
            }

            openBtn.addEventListener('click', (e) => { e.stopPropagation(); openMenu(); });
            closeBtn.addEventListener('click', (e) => { e.stopPropagation(); closeMenu(); });
            mobileNav.addEventListener('click', (e) => { if (e.target === mobileNav) closeMenu(); });
            mobileLinks.forEach((link) => link.addEventListener('click', closeMenu));

            const mq = window.matchMedia('(min-width: 768px)');
            mq.addEventListener('change', (e) => { if (e.matches) closeMenu(); });

            // ✅ cambio de fondo estable al hacer scroll
            function onScroll() {
                if (window.scrollY > 20) {
                    blurLayer.classList.add('opacity-100');
                    header.classList.add('border-b');
                } else {
                    blurLayer.classList.remove('opacity-100');
                    header.classList.remove('border-b');
                }
            }

            window.addEventListener('scroll', onScroll, { passive: true });
            onScroll();
        });
    </script>
</header>
